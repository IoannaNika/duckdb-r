From c36e9dbf119b67991276a256b40b4bf69ac8f4ed Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Kirill=20M=C3=BCller?= <kirill@cynkra.com>
Date: Wed, 27 Aug 2025 07:52:16 +0200
Subject: [PATCH] csv-disable-print

---
 .../duckdb/execution/operator/csv_scanner/csv_state_machine.hpp | 2 ++
 src/duckdb/src/logging/log_storage.cpp                          | 2 ++
 2 files changed, 4 insertions(+)

diff --git a/src/duckdb/src/include/duckdb/execution/operator/csv_scanner/csv_state_machine.hpp b/src/duckdb/src/include/duckdb/execution/operator/csv_scanner/csv_state_machine.hpp
index 45aeaad9b..c7191aa5b 100644
--- a/src/duckdb/src/include/duckdb/execution/operator/csv_scanner/csv_state_machine.hpp
+++ b/src/duckdb/src/include/duckdb/execution/operator/csv_scanner/csv_state_machine.hpp
@@ -129,12 +129,14 @@ public:
 	}
 
 	void Print() const {
+#ifndef DUCKDB_DISABLE_PRINT
 		std::cout << "State Machine Options" << '\n';
 		std::cout << "Delim: " << state_machine_options.delimiter.GetValue() << '\n';
 		std::cout << "Quote: " << state_machine_options.quote.GetValue() << '\n';
 		std::cout << "Escape: " << state_machine_options.escape.GetValue() << '\n';
 		std::cout << "Comment: " << state_machine_options.comment.GetValue() << '\n';
 		std::cout << "---------------------" << '\n';
+#endif
 	}
 	//! The Transition Array is a Finite State Machine
 	//! It holds the transitions of all states, on all 256 possible different characters
diff --git a/src/duckdb/src/logging/log_storage.cpp b/src/duckdb/src/logging/log_storage.cpp
index 3c6845f64..4f83b263c 100644
--- a/src/duckdb/src/logging/log_storage.cpp
+++ b/src/duckdb/src/logging/log_storage.cpp
@@ -253,8 +253,10 @@ void BufferingLogStorage::UpdateConfigInternal(DatabaseInstance &db, case_insens
 }
 
 void StdOutLogStorage::StdOutWriteStream::WriteData(const_data_ptr_t buffer, idx_t write_size) {
+#ifndef DUCKDB_DISABLE_PRINT
 	std::cout.write(const_char_ptr_cast(buffer), NumericCast<int64_t>(write_size));
 	std::cout.flush();
+#endif
 }
 
 StdOutLogStorage::StdOutLogStorage(DatabaseInstance &db) : CSVLogStorage(db, false, 1) {
-- 
2.50.1

